<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="/_src/styles/fonts.css">
    <link rel="stylesheet" href="/_src/styles/header.css">
    <link rel="stylesheet" href="/_src/styles/main.css">
    <link rel="stylesheet" href="/_src/styles/topbar.css">
    <link rel="stylesheet" href="/_src/styles/sidebar.css">
    <link rel="stylesheet" href="/_src/styles/lesson.css">
    <link rel="stylesheet" href="/_src/styles/code.css">
    <link rel="stylesheet" href="/_src/styles/footer.css">
    <link rel="stylesheet" href="/_src/styles/responsive.css">
    <script src="https://kit.fontawesome.com/2c38f3d850.js" crossorigin="anonymous"></script>

    <title> | Módulo 3 - Backend </title>
  </head>

  <body>
    <div class="reader-bar-start">

      <div class="headerResponsive">
        <div class="leftContent">
          <span><img src="/_src/assets/logo-white.png" alt='logo Henry' height=22px class="d-inline-block align-text-top"></span><span></span>
        </div>
        <div class="menuDiv">
          <input type="checkbox">
          <i class="fas fa-bars"></i>
          <i class="fas fa-times"></i>
          <nav>
            <ul><li><a href="/">Intro</a></li>
<li><a href="/Node/">Node</a></li>
<li><a href="/Promises/">Promises</a></li>
<li><a href="/WebServer/">Web Server</a></li>
<li><a href="/AdvancedPromises/">Advanced Promises</a></li>
<li><a href="/Express/">Express</a></li>
<li><a href="/Testing/">Testing</a></li>
<li><a href="/AsyncAwait/">Async/Await</a></li></ul>
          </nav>
        </div>
      </div>

      <div class="headerContainer">
        <div class="headerContained">
          <img src="/_src/assets/logo-white.png" alt='logo Henry' height=27px class="d-inline-block align-text-top">
          <div>
            <span class="lessonTitle"></span> | <span>Módulo 3 - Backend</span>
          </div>
        </div>
      </div>

      <main>
        <div class="topnav" id='myTopnav' >
          
          <ul class="nav">
      
      <li class="link">
        <a href="/" class="nav-link" role="menuitem">Intro</a>
      </li>
<li class="link">
        <a href="/Node/" class="nav-link" role="menuitem">Node</a>
      </li>
<li class="link">
        <a href="/Promises/" class="nav-link" role="menuitem">Promises</a>
      </li>
<li class="link">
        <a href="/WebServer/" class="nav-link" role="menuitem">Web Server</a>
      </li>
<li class="link">
        <a href="/AdvancedPromises/" class="nav-link" role="menuitem">Advanced Promises</a>
      </li>
<li class="link">
        <a href="/Express/" class="nav-link" role="menuitem">Express</a>
      </li>
<li class="link">
        <a href="/Testing/" class="nav-link" role="menuitem">Testing</a>
      </li>
<li class="link">
        <a href="/AsyncAwait/" class="nav-link" role="menuitem">Async/Await</a>
      </li>
    </ul>
        </div>

        <div class='sidebar'>
          <div class="tocTitle">
            Contenido de la clase
            </div>
          <div class="tocBox">
            
            <nav class="toc" >
        <ul><li><a href="#descripci%C3%B3n">Descripción </a></li><li><a href="#configuraci%C3%B3n-inicial">Configuración inicial </a></li><li><a href="#instrucciones">Instrucciones </a><ul><li><a href="#breve-repaso-de-creaci%C3%B3n-de-rutas">Breve repaso de creación de rutas </a></li><li><a href="#post-%2Fposts">POST /posts </a></li><li><a href="#post-%2Fposts%2Fauthor%2F%3Aauthor">POST /posts/author/:author </a></li><li><a href="#get-%2Fposts">GET /posts </a></li><li><a href="#get-%2Fposts%2F%3Aauthor">GET /posts/:author </a></li><li><a href="#get-%2Fposts%2F%3Aauthor%2F%3Atitle">GET /posts/:author/:title </a></li><li><a href="#put-%2Fposts">PUT /posts </a></li><li><a href="#delete-%2Fposts">DELETE /posts </a></li><li><a href="#delete-%2Fauthor">DELETE /author </a></li></ul></li><li><a href="#postman">Postman </a><ul><li><a href="#instalaci%C3%B3n">Instalación </a></li><li><a href="#instrucciones-1">Instrucciones </a></li></ul></li></ul>
      </nav>
          </div>
        </div>

        <div class='lesson'>
          <div style="display:flex; justify-content: right; right: 0; width: 100%;">
            <div class="readingTime">
                    Tiempo de lectura 16 min
            </div>
          </div>
          <div>
            
            <h1 id="express-posts-homework" tabindex="-1">Express Posts Homework <a class="anchor-link" href="#express-posts-homework"></a></h1>
<h2 id="descripci%C3%B3n" tabindex="-1">Descripción <a class="anchor-link" href="#descripci%C3%B3n"></a></h2>
<p>En esta homework vamos a desarrollar una API que nos permitirá gestionar Posts (entendiendo como tal a una publicación similar a las que hacemos en las redes sociales) y realizar las siguientes acciones:</p>
<ul>
<li>Consultar Posts existentes</li>
<li>Crear nuevos Posts</li>
<li>Actualizar Posts existentes</li>
<li>Eliminar Posts existentes</li>
</ul>
<p>Por lo que estaríamos construyendo algo similar a lo que sería un gestor de publicaciones de cualquiera de las redes sociales que conocemos</p>
<h2 id="configuraci%C3%B3n-inicial" tabindex="-1">Configuración inicial <a class="anchor-link" href="#configuraci%C3%B3n-inicial"></a></h2>
<ol>
<li>Ejecutar <code>npm install</code> desde la carpeta “homework”</li>
<li>Ejecutar <code>npm test</code> para correr los tests</li>
<li>Ejecutar <code>npm run nodemon</code> para que el servidor quede corriendo en nuestra computadora y automáticamente se restartee si realizamos algún cambio</li>
<li>Ya se encuentra todo configurado, podremos hacer requests a <code>http://localhost:3000</code> que es donde estará corriendo nuestro servidor. (Para ver cómo realizar request ver el apartado <code>Postman</code> al final de este documento)</li>
</ol>
<h2 id="instrucciones" tabindex="-1">Instrucciones <a class="anchor-link" href="#instrucciones"></a></h2>
<p>Como se mencionó anteriormente debemos generar una API para gestionar Posts, los mismos serán almacenados en memoria utilizando un array de JavaScript denominado <code>posts</code> para evitar tener que trabajar con una base de datos.</p>
<p>Cada <code>Post</code> va a ser un objeto con la siguiente estructura:</p>
<pre class="language-js"><code class="hljs language-js"><span class="token punctuation">{</span><br>  author<span class="token operator">:</span> <span class="token string">"Autor del Post"</span><br>  title<span class="token operator">:</span> <span class="token string">"Titulo del Post"</span><span class="token punctuation">,</span><br>  contents<span class="token operator">:</span> <span class="token string">"Contenido del Post"</span><br><span class="token punctuation">}</span></code></pre>
<p>Tanto <code>author</code> como <code>title</code> y <code>contents</code> van a ser del tipo String.</p>
<p>Desarrollar las siguientes rutas dentro del archivo <code>server.js</code> de la carpeta <code>src</code></p>
<h3 id="breve-repaso-de-creaci%C3%B3n-de-rutas" tabindex="-1">Breve repaso de creación de rutas <a class="anchor-link" href="#breve-repaso-de-creaci%C3%B3n-de-rutas"></a></h3>
<p>Básicamente, la creación de rutas sirve para determinar cómo una aplicación responde a la solicitud de un cliente en un determinada vía de acceso (llamada URI) con un método de solicitud HTTP específico. En otras palabras, lo que vamos a hacer es invocar uno de estos métodos HTTP (especialmente POST, GET, PUT, HEAD y DELETE), utilizando la variable app, para indicarle la acción que queremos realizar y disponer la ruta que queremos para una determinada URI.</p>
<p>Es por esto que la definición de creación de rutas es la siguiente:</p>
<pre class="language-javascript"><code class="hljs language-javascript">server<span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">(</span><span class="token constant">PATH</span><span class="token punctuation">,</span> <span class="token constant">HANDLER</span><span class="token punctuation">)</span></code></pre>
<p>Donde:</p>
<ul>
<li>server es una instancia de express</li>
<li>METHOD es un método de solicitud HTTP</li>
<li>PATH es la vía de acceso al servidor</li>
<li>HANDLER es la función que se ejecuta cuando se hace el direccionamiento a la ruta, siempre recibe como parámetro dos variables, req por request y res por response.</li>
</ul>
<p>Veamos ahora un ejemplo más concreto. El método GET se utiliza para leer la representación de un resource, que puede estar en distintos formatos tales como una imagen, un JSON, un XML, etc. Por lo que utilizando nuestra instancia de express vamos a invocar a get indicando la ruta que queremos para <code>'/'</code> y mandar una response con un “Hola mundo!” como texto.</p>
<pre class="language-javascript"><code class="hljs language-javascript">server<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//Ruta para un GET a /</span><br>  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hola mundo!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// response "Hola mundo!" en la pagina principal</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Si en lugar de texto queremos que se envíe con el formato JSON podríamos hacer lo siguiente:</p>
<pre class="language-javascript"><code class="hljs language-javascript">server<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><br>    saludo<span class="token operator">:</span> <span class="token string">'Hola mundo!'</span><br>  <span class="token punctuation">}</span><br>  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span> obj <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Ahora supongamos que queremos setear el status de la response como 200 para indicar que la solicitud ha tenido éxito, para eso utilizaremos <code>res.status()</code>.</p>
<pre class="language-javascript"><code class="hljs language-javascript">server<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hola mundo!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Otro punto a tener en cuenta es que <code>req.body</code> se usa para tener los parámetros que son enviados por el cliente como parte de un request. Entonces, si por ejemplo quisiera acceder a la propiedad name podria utilizar <code>req.body.name</code>.</p>
<pre class="language-javascript"><code class="hljs language-javascript">server<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>   <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><br>    saludo<span class="token operator">:</span> <span class="token string">'Hola'</span> <span class="token operator">+</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>name<span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><br>  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span> obj <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Para finalizar si queremos acceder a los parámetros de una consulta utilizaremos <code>req.query</code>. Por ejemplo, supongamos que se desea buscar ‘toni’ realizando un <code>GET /search?name=toni</code>, entonces lo que haremos será acceder al parámetro nombre de la query con <code>req.query.name</code>.</p>
<h3 id="post-%2Fposts" tabindex="-1"><code>POST /posts</code> <a class="anchor-link" href="#post-%2Fposts"></a></h3>
<p>Cuando se ejecute un request del tipo <code>POST</code> en la ruta <code>/posts</code>:</p>
<ul>
<li>
<p>Asegurarse que dentro del body del request existan <code>author</code>, <code>title</code> y <code>contents</code>. En el caso de que alguno de ellos no se encuentre, devolver un JSON con un objeto de la forma <code>{error: &quot;No se recibieron los parámetros necesarios para crear el Post&quot;}</code>. Verificar que el código de error sea el adecuado.</p>
</li>
<li>
<p>Si los tres campos fueron provistos, crear un nuevo objeto Post con los valores indicados para <code>author</code>, <code>title</code> y <code>contents</code> y asignándole un valor numérico único como propiedad <code>id</code>. Agregar dicho objeto al array de posts. Devolver un JSON con el objeto recientemente creado.</p>
</li>
</ul>
<h3 id="post-%2Fposts%2Fauthor%2F%3Aauthor" tabindex="-1"><code>POST /posts/author/:author</code> <a class="anchor-link" href="#post-%2Fposts%2Fauthor%2F%3Aauthor"></a></h3>
<p>Cuando se ejecute un request del tipo <code>POST</code> en la ruta <code>/posts/author/:author</code>:</p>
<ul>
<li>
<p>Asegurarse que dentro del body del request existan tanto <code>title</code> como <code>contents</code>. Ademas, por parametros viaja el nombre del autor. En el caso de que alguno de ellos no se encuentre, devolver un JSON con un objeto de la forma <code>{error: &quot;No se recibieron los parámetros necesarios para crear el Post&quot;}</code>. Verificar que el código de error sea el adecuado.</p>
</li>
<li>
<p>Si los tres campos fueron provistos, crear un nuevo objeto Post con los valores indicados para <code>author</code>, <code>title</code> y <code>contents</code> y asignándole un valor numérico único como propiedad <code>id</code>. Agregar dicho objeto al array de posts. Devolver un JSON con el objeto recientemente creado.</p>
</li>
</ul>
<h3 id="get-%2Fposts" tabindex="-1"><code>GET /posts</code> <a class="anchor-link" href="#get-%2Fposts"></a></h3>
<p>Cuando se ejecute un request del tipo <code>GET</code> en la ruta <code>/posts</code>:</p>
<ul>
<li>
<p>Si existe el parámetro <code>term</code> dentro de la URL (query-string parameter) devolver aquellos Posts que contengan el valor del parámetro <code>term</code> en su título o en su contenido (o en ambos).</p>
</li>
<li>
<p>Caso contrario, devolver todos los Posts que se encuentren almacenados en el array <code>posts</code>.</p>
</li>
</ul>
<h3 id="get-%2Fposts%2F%3Aauthor" tabindex="-1"><code>GET /posts/:author</code> <a class="anchor-link" href="#get-%2Fposts%2F%3Aauthor"></a></h3>
<p>Cuando se ejecuta el request del tipo <code>GET</code> en la ruta <code>posts/:author</code>:</p>
<ul>
<li>
<p>Si existen Post del autor indicado en el parametro <code>author</code>, devolverlos.</p>
</li>
<li>
<p>Caso contrario, devolver un JSON con un objeto de la forma <code>{error: &quot;No existe ningun post del autor indicado&quot;}</code>. Verificar que el código de error sea el adecuado.</p>
</li>
</ul>
<h3 id="get-%2Fposts%2F%3Aauthor%2F%3Atitle" tabindex="-1"><code>GET /posts/:author/:title</code> <a class="anchor-link" href="#get-%2Fposts%2F%3Aauthor%2F%3Atitle"></a></h3>
<p>Cuando se ejecuta el request del tipo <code>GET</code> en la ruta <code>posts/:author/:title</code>:</p>
<ul>
<li>
<p>Si existen Post que coincidan con ambos parametros, <code>author</code> y <code>title</code> devolver aquellos Posts que correspondan con la información provista, es decir que coincidan <code>author</code> y <code>title</code>.</p>
</li>
<li>
<p>Caso contrario, devolver un JSON con un objeto de la forma <code>{error: &quot;No existe ningun post con dicho titulo y autor indicado&quot;}</code>. Verificar que el código de error sea el adecuado.</p>
</li>
</ul>
<h3 id="put-%2Fposts" tabindex="-1"><code>PUT /posts</code> <a class="anchor-link" href="#put-%2Fposts"></a></h3>
<p>Cuando se ejecute un request del tipo <code>PUT</code> en la ruta <code>/posts</code></p>
<ul>
<li>
<p>Asegurarse que dentro del body del request existan <code>id</code>, <code>title</code> y <code>contents</code>. En el caso de que alguno de ellos no se encuentre, devolver un JSON con un objeto de la forma <code>{error: &quot;No se recibieron los parámetros necesarios para modificar el Post&quot;}</code>. Verificar que el código de error sea el adecuado.</p>
</li>
<li>
<p>En el caso de que el <code>id</code> no corresponda a un post válido existente, devolver un JSON similar al anterior modificando el mensaje de error por uno adecuado para este caso.</p>
</li>
<li>
<p>Si se encuentran todos los parámetros y el <code>id</code> es válido, actualizar los datos del <code>title</code> y <code>contents</code> del Post que coincida con dicho <code>id</code> . Devolver un JSON con el objeto recientemente actualizado.</p>
</li>
</ul>
<h3 id="delete-%2Fposts" tabindex="-1"><code>DELETE /posts</code> <a class="anchor-link" href="#delete-%2Fposts"></a></h3>
<p>Cuando se ejecute un request del tipo <code>DELETE</code> en la ruta <code>posts</code></p>
<ul>
<li>
<p>Asegurarse que dentro del body del request exista un <code>id</code> correspondiente a un Post válido. De no ser así, ya sea por falta del campo <code>id</code> o por ser un id inválido, devolver un JSON con un objeto con un mensaje correspondiente en cada caso manteniendo la forma de siempre: <code>{error: &quot;Mensaje de error&quot;}</code></p>
</li>
<li>
<p>En el caso de que el <code>id</code> corresponda a un Post válido, eliminarlo del array de Posts y devolver un JSON con el siguiente objeto: <code>{ success: true }</code>.</p>
</li>
<li>
<p>Nota: Ver que método van a utilizar para eliminar un post, dependiendo el caso puede que sea necesario modificar el <code>const posts = []</code> del comienzo por <code>let posts = []</code></p>
</li>
</ul>
<h3 id="delete-%2Fauthor" tabindex="-1"><code>DELETE /author</code> <a class="anchor-link" href="#delete-%2Fauthor"></a></h3>
<p>Cuando se ejecute un request del tipo <code>DELETE</code> en la ruta <code>author</code></p>
<ul>
<li>
<p>Asegurarse que dentro del body del request exista un <code>author</code> correspondiente a un autor válido. De no ser así, ya sea por falta del campo <code>author</code> o por ser un autor inválido, devolver un JSON con un objeto con un mensaje correspondiente en cada caso manteniendo la forma de siempre: <code>{error: &quot;Mensaje de error&quot;}</code></p>
</li>
<li>
<p>En el caso de que el <code>author</code> corresponda a un autor válido, eliminar del array de Posts todos los Post correspondientes a dicho autor y devolver los posts eliminados.</p>
</li>
<li>
<p>Nota: Ver que método van a utilizar para eliminar un post, dependiendo el caso puede que sea necesario modificar el <code>const posts = []</code> del comienzo por <code>let posts = []</code></p>
</li>
</ul>
<h2 id="postman" tabindex="-1">Postman <a class="anchor-link" href="#postman"></a></h2>
<h3 id="instalaci%C3%B3n" tabindex="-1">Instalación <a class="anchor-link" href="#instalaci%C3%B3n"></a></h3>
<p>Pueden descargar Postman para el sistema operativo que tengan desde aca: <a href="https://www.postman.com/downloads/">https://www.postman.com/downloads/</a></p>
<h3 id="instrucciones-1" tabindex="-1">Instrucciones <a class="anchor-link" href="#instrucciones-1"></a></h3>
<p>Una vez instalado podrán acceder a la siguiente pantalla principal de Postman:</p>
<p align="center">
  <img src="./img/pantalla-inicial.png" alt="Img" />
</p>
<ol>
<li>Crear una nueva <code>Collection</code> para agrupar allí todos los request que vayamos a hacer para este proyecto. Para eso clickear en el botón <code>New</code>, luego seleccionar <code>Collection</code> y darle un nombre a la misma.</li>
</ol>
<p align="center">
  <img src="./img/new-collection.png" alt="Img" />
</p>
<ol start="2">
<li>Crear un nuevo <code>Request</code>, darle un nombre y seleccionar la colección creada anteriormente para agrupar todos los Request allí</li>
</ol>
<p align="center">
  <img src="./img/new-request.png" alt="Img" />
</p>
<ol start="3">
<li>Ahora en la parte del recuadro rojo tendremos que</li>
</ol>
<ul>
<li>
<p>Indicar que tipo de Request queremos:</p>
<ul>
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
</ul>
</li>
<li>
<p>La URL sobre la cual vamos a realizar el request (En este caso será <a href="http://localhost:3000/">http://localhost:3000/</a>)</p>
</li>
<li>
<p>Incluir los <code>Params</code> o el <code>Body</code> dependiendo del tipo de Request que hagamos</p>
<p align="center">
  <img src="./img/request-general.png" alt="Img" />
</p>
</li>
</ul>
<p>Video demostrativo de cómo se utiliza y funcionan algunos request básicos de Postman:</p>
  <p align="center">
    <img src="./img/video-request.gif" alt="Img" />
  </p>

          </div>
        </div>

      </main>

      <div class="feedback">
        <a href='https://airtable.com/shrBpWkYV4K12PPNZ?prefill_clase=' target="_blank">
          Dejanos tu feedback!👍
        </a>
      </div>

      <div class="footerContainer">
        <div class="footerContained">
          <p>Hecho con 💛 por alumnos de Henry</p>
        </div>
      </div>

      <div class="readerBarDiv">
        
  <!-- up button -->
  <div>
    <button
      id="upBtn"
      style="position:fixed; width:32px; height:32px; border-radius:50%; border:none; background-color:black; right:20px; bottom:55px; color:white; z-index:999; focus:outline-none; cursor:pointer; transition-duration:500ms; opacity:0; pointer-events:none;"
    ><i class="arrow up"></i></button>
  </div>
  
  <style>
  .arrow {
    border: solid white;
    border-width: 0 3px 3px 0;
    display: inline-block;
    padding: 3px;
  }

  .up {
    transform: rotate(-135deg);
    -webkit-transform: rotate(-135deg);
  }
  </style>

  <script>
  window.addEventListener('scroll', () => {
    if (window.scrollY > 250) {
      upBtn.style.opacity = 1;
      upBtn.style.pointerEvents = 'auto';     
    }
    else {
      upBtn.style.opacity = 0;
      upBtn.style.pointerEvents = 'none';
    }
  })

  upBtn.addEventListener('click', () => {
    let start = document.querySelector('.reader-bar-start')
    start.scrollIntoView({behavior: "smooth"})
  })
  </script>

  <!-- reader bar -->
  <div id="readerBarContainer" style="height:3px;width:100%;background-color:black;position:fixed;top:66px;left:0;z-index:1099;transition:0.2s;">
    <div id="readerBar" style="height:3px;width:0;background-color:yellow;position:fixed;top:66px;left:0;z-index:1099;transition:0.2s;"></div>
  </div>

  <script>
    let winH = window.innerHeight;
    const content = document.querySelector('.reader-bar-start');

    let contentH = content.offsetHeight;
    let contentS = contentH - winH;
    let readerBar = document.getElementById('readerBar');
    window.addEventListener('load', () => {
      document.addEventListener ('scroll', updateBar);
    })
    window.addEventListener('resize', redefine)

    function redefine() {
      winH = window.innerHeight;
      contentH = content.offsetHeight;
      contentS = contentH - winH;
      updateBar();
    }

    function updateBar() {
      const pagePos = window.scrollY; 
      const updatedBar = pagePos * 100 / contentS;
      readerBar.style.width = updatedBar + "%";
    }
  </script>
  
      </div>

    </body>
  </html>